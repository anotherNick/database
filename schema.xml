<?xml version="1.0" encoding="utf-8"?>
<database name="W101" defaultIdMethod="native" defaultPhpNamingMethod="underscore" namespace="W101">
  <table name="area" idMethod="native" phpName="Area">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="name" phpName="Name" type="LONGVARCHAR"/>
    <column name="image" phpName="Image" type="LONGVARCHAR"/>
    <column name="world_id" phpName="WorldId" type="INTEGER"/>
    <foreign-key foreignTable="world" name="area_fk_8dfe93" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="world_id" foreign="id"/>
    </foreign-key>
    <index name="index_foreignkey_area_world">
      <index-column name="world_id"/>
    </index>
  </table>
  <table name="areafish" idMethod="native" phpName="Areafish">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true"  autoIncrement="true"/>
    <column name="votes_up" phpName="VotesUp" type="INTEGER"/>
    <column name="votes_down" phpName="VotesDown" type="INTEGER"/>
    <column name="area_id" phpName="AreaId" type="INTEGER"/>
    <column name="fish_id" phpName="FishId" type="INTEGER"/>
    <foreign-key foreignTable="fish" name="areafish_fk_bc1f13" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="fish_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="area" name="areafish_fk_915043" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="area_id" foreign="id"/>
    </foreign-key>
    <index name="index_foreignkey_areafish_area">
      <index-column name="area_id"/>
    </index>
    <index name="index_foreignkey_areafish_fish">
      <index-column name="fish_id"/>
    </index>
  </table>
  <table name="areafishspawn" idMethod="native" phpName="Areafishspawn">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="x_loc" phpName="XLoc" type="INTEGER"/>
    <column name="y_loc" phpName="YLoc" type="INTEGER"/>
    <column name="votes_up" phpName="VotesUp" type="INTEGER"/>
    <column name="votes_down" phpName="VotesDown" type="INTEGER"/>
    <column name="area_id" phpName="AreaId" type="INTEGER"/>
    <column name="fish_id" phpName="FishId" type="INTEGER"/>
    <column name="areafish_id" phpName="AreafishId" type="INTEGER"/>
    <foreign-key foreignTable="areafish" name="areafishspawn_fk_b080ba" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="areafish_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="fish" name="areafishspawn_fk_bc1f13" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="fish_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="area" name="areafishspawn_fk_915043" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="area_id" foreign="id"/>
    </foreign-key>
    <index name="index_foreignkey_areafishspawn_area">
      <index-column name="area_id"/>
    </index>
    <index name="index_foreignkey_areafishspawn_fish">
      <index-column name="fish_id"/>
    </index>
    <index name="index_foreignkey_areafishspawn_areafish">
      <index-column name="areafish_id"/>
    </index>
  </table>
  <table name="areareagent" idMethod="native" phpName="Areareagent">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="votes_up" phpName="VotesUp" type="INTEGER"/>
    <column name="votes_down" phpName="VotesDown" type="INTEGER"/>
    <column name="area_id" phpName="AreaId" type="INTEGER"/>
    <column name="reagent_id" phpName="ReagentId" type="INTEGER"/>
    <foreign-key foreignTable="reagent" name="areareagent_fk_6fcb97" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="reagent_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="area" name="areareagent_fk_915043" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="area_id" foreign="id"/>
    </foreign-key>
    <index name="index_foreignkey_areareagent_reagent">
      <index-column name="reagent_id"/>
    </index>
    <index name="index_foreignkey_areareagent_area">
      <index-column name="area_id"/>
    </index>
  </table>
  <table name="areareagentspawn" idMethod="native" phpName="Areareagentspawn">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="x_loc" phpName="XLoc" type="INTEGER"/>
    <column name="y_loc" phpName="YLoc" type="INTEGER"/>
    <column name="area_id" phpName="AreaId" type="INTEGER"/>
    <column name="reagent_id" phpName="ReagentId" type="INTEGER"/>
    <column name="votes_up" phpName="VotesUp" type="INTEGER"/>
    <column name="votes_down" phpName="VotesDown" type="INTEGER"/>
    <column name="areareagent_id" phpName="AreareagentId" type="INTEGER"/>
    <foreign-key foreignTable="areareagent" name="areareagentspawn_fk_c5a06e" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="areareagent_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="reagent" name="areareagentspawn_fk_6fcb97" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="reagent_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="area" name="areareagentspawn_fk_915043" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="area_id" foreign="id"/>
    </foreign-key>
    <index name="index_foreignkey_areareagentspawn_area">
      <index-column name="area_id"/>
    </index>
    <index name="index_foreignkey_areareagentspawn_reagent">
      <index-column name="reagent_id"/>
    </index>
    <index name="index_foreignkey_areareagentspawn_areareagent">
      <index-column name="areareagent_id"/>
    </index>
  </table>
  <table name="class" idMethod="native" phpName="Classname">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="name" phpName="Name" type="LONGVARCHAR"/>
  </table>
  <table name="fish" idMethod="native" phpName="Fish">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="name" phpName="Name" type="LONGVARCHAR"/>
    <column name="image" phpName="Image" type="LONGVARCHAR"/>
    <column name="rank" phpName="Rank" type="INTEGER"/>
    <column name="description" phpName="Description" type="LONGVARCHAR"/>
    <column name="initial_xp" phpName="InitialXp" type="INTEGER"/>
    <column name="rarity_id" phpName="RarityId" type="INTEGER"/>
    <column name="class_id" phpName="ClassId" type="INTEGER"/>
    <foreign-key foreignTable="class" name="fish_fk_76d711" onDelete="SET NULL" onUpdate="SET NULL" phpName="Classname">
      <reference local="class_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="rarity" name="fish_fk_3c96bc" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="rarity_id" foreign="id"/>
    </foreign-key>
    <index name="index_foreignkey_fish_rarity">
      <index-column name="rarity_id"/>
    </index>
    <index name="index_foreignkey_fish_class">
      <index-column name="class_id"/>
    </index>
    <behavior name="validate">
        <parameter name="name1" value="{column: name, validator: NotBlank}" />
        <parameter name="name2" value="{column: name, validator: Unique}" />
        <parameter name="rank1" value="{column: rank, validator: NotBlank}" />
        <parameter name="rank2" value="{column: rank, validator: GreaterThanOrEqual, options: {value: 1}}" />
        <parameter name="description" value="{column: description, validator: NotBlank}" />
        <parameter name="initialxp1" value="{column: initial_xp, validator: NotBlank}" />
        <parameter name="initialxp2" value="{column: initial_xp, validator: GreaterThanOrEqual, options: {value: 1}}" />
        <parameter name="rarity1" value="{column: rarity_id, validator: PkExists, options: {className: \W101\Rarity}}" /> 
        <parameter name="class1" value="{column: class_id, validator: PkExists, options: {className: \W101\Classname}}" />
    </behavior>
  </table>
  <table name="fish_housingitem" idMethod="native" phpName="FishHousingitem">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="housingitem_id" phpName="HousingitemId" type="INTEGER"/>
    <column name="fish_id" phpName="FishId" type="INTEGER"/>
    <foreign-key foreignTable="fish" name="fish_housingitem_fk_bc1f13" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="fish_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="housingitem" name="fish_housingitem_fk_56bfa3" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="housingitem_id" foreign="id"/>
    </foreign-key>
    <index name="index_for_fish_housingitem_fish_id">
      <index-column name="fish_id"/>
    </index>
    <index name="index_for_fish_housingitem_housingitem_id">
      <index-column name="housingitem_id"/>
    </index>
  </table>
  <table name="housingitem" idMethod="native" phpName="Housingitem">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="name" phpName="Name" type="LONGVARCHAR"/>
    <column name="can_trade" phpName="CanTrade" type="INTEGER"/>
    <column name="can_auction" phpName="CanAuction" type="INTEGER"/>
    <column name="can_hold_fish" phpName="CanHoldFish" type="INTEGER"/>
    <column name="housingtype_id" phpName="HousingtypeId" type="INTEGER"/>
    <foreign-key foreignTable="housingtype" name="housingitem_fk_b7832e" onDelete="SET NULL" onUpdate="SET NULL">
      <reference local="housingtype_id" foreign="id"/>
    </foreign-key>
    <index name="index_foreignkey_housingitem_housingtype">
      <index-column name="housingtype_id"/>
    </index>
  </table>
  <table name="housingtype" idMethod="native" phpName="Housingtype">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="name" phpName="Name" type="LONGVARCHAR"/>
  </table>
  <table name="rarity" idMethod="native" phpName="Rarity">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="name" phpName="Name" type="LONGVARCHAR"/>
  </table>
  <table name="reagent" idMethod="native" phpName="Reagent">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="name" phpName="Name" type="LONGVARCHAR"/>
    <column name="rank" phpName="Rank" type="INTEGER"/>
    <column name="image" phpName="Image" type="LONGVARCHAR"/>
    <column name="description" phpName="Description" type="LONGVARCHAR"/>
    <column name="can_auction" phpName="CanAuction" type="INTEGER"/>
    <column name="is_crowns_only" phpName="IsCrownsOnly" type="INTEGER"/>
    <column name="is_retired" phpName="IsRetired" type="INTEGER"/>
    <column name="class_id" phpName="ClassId" type="INTEGER"/>
    <foreign-key foreignTable="class" name="reagent_fk_76d711" onDelete="SET NULL" onUpdate="SET NULL" phpName="School">
      <reference local="class_id" foreign="id"/>
    </foreign-key>
    <index name="index_foreignkey_reagent_class">
      <index-column name="class_id"/>
    </index>
    <behavior name="validate">
        <parameter name="name1" value="{column: name, validator: NotBlank}" />
        <parameter name="name2" value="{column: name, validator: Unique}" />
        <parameter name="rank1" value="{column: rank, validator: NotBlank}" />
        <parameter name="rank2" value="{column: rank, validator: GreaterThanOrEqual, options: {value: 1}}" />
        <parameter name="description" value="{column: description, validator: NotBlank}" /> 
        <parameter name="class1" value="{column: class_id, validator: PkExists, options: {className: \W101\Classname}}" />
    </behavior>
  </table>
  <table name="world" idMethod="native" phpName="World">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true"/>
    <column name="name" phpName="Name" type="LONGVARCHAR"/>
    <column name="image" phpName="Image" type="LONGVARCHAR"/>
  </table>
</database>